{
  "hash": "6a26dde6f1a8800677d10bf47e44626d",
  "result": {
    "markdown": "---\ntitle: \"¿A quién le compra más el Estado?\"\ndescription: \"Uso datos abiertos de compras públicas para averiguar los proveedores top en tratos directos.\"\nauthor: \"Paulo Villarroel\"\ndate: \"2022-10-15\"\ncategories: [tutorial, r, datos abiertos]\nimage: \"public.jpg\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.3.6     ✔ purrr   0.3.4\n✔ tibble  3.1.8     ✔ dplyr   1.0.9\n✔ tidyr   1.2.0     ✔ stringr 1.4.0\n✔ readr   2.1.2     ✔ forcats 0.5.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(CausalImpact)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: bsts\nLoading required package: BoomSpikeSlab\nLoading required package: Boom\nLoading required package: MASS\n\nAttaching package: 'MASS'\n\nThe following object is masked from 'package:dplyr':\n\n    select\n\n\nAttaching package: 'Boom'\n\nThe following object is masked from 'package:stats':\n\n    rWishart\n\n\nAttaching package: 'BoomSpikeSlab'\n\nThe following object is masked from 'package:stats':\n\n    knots\n\nLoading required package: zoo\n\nAttaching package: 'zoo'\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\nLoading required package: xts\n\nAttaching package: 'xts'\n\nThe following objects are masked from 'package:dplyr':\n\n    first, last\n\n\nAttaching package: 'bsts'\n\nThe following object is masked from 'package:BoomSpikeSlab':\n\n    SuggestBurn\n```\n:::\n\n```{.r .cell-code}\nlibrary(janitor)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n```\n:::\n\n```{.r .cell-code}\nlibrary(zoo)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhere::i_am(\"index.qmd\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nhere() starts at C:/Users/pvill/OneDrive/Proyectos R/mi_blog/posts/estancias-hospitalarias\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstays <- read_csv2(\"data.csv\", locale = locale(encoding = \"latin1\")) |> \n  clean_names() |> \n  dplyr::select(3)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nℹ Using \"','\" as decimal and \"'.'\" as grouping mark. Use `read_delim()` for more control.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 616 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (2): Fecha, Tipo egreso\ndbl (2): Estancia, Edad\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstays_ts <- zoo(stays)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npre_period <- c(1, 446)\npost_period <- c(447, 616)\n\nimpact <- CausalImpact(stays_ts, pre_period, post_period)\n\nplot(impact)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(impact)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nPosterior inference {CausalImpact}\n\n                         Average       Cumulative      \nActual                   11            1808            \nPrediction (s.d.)        13 (2.3)      2166 (389.3)    \n95% CI                   [8.1, 17]     [1381.7, 2941]  \n                                                       \nAbsolute effect (s.d.)   -2.1 (2.3)    -358.0 (389.3)  \n95% CI                   [-6.7, 2.5]   [-1133.5, 426.3]\n                                                       \nRelative effect (s.d.)   -17% (18%)    -17% (18%)      \n95% CI                   [-52%, 20%]   [-52%, 20%]     \n\nPosterior tail-area probability p:   0.18812\nPosterior prob. of a causal effect:  81%\n\nFor more details, type: summary(impact, \"report\")\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(impact, \"report\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAnalysis report {CausalImpact}\n\n\nDuring the post-intervention period, the response variable had an average value of approx. 10.64. In the absence of an intervention, we would have expected an average response of 12.74. The 95% interval of this counterfactual prediction is [8.13, 17.30]. Subtracting this prediction from the observed response yields an estimate of the causal effect the intervention had on the response variable. This effect is -2.11 with a 95% interval of [-6.67, 2.51]. For a discussion of the significance of this effect, see below.\n\nSumming up the individual data points during the post-intervention period (which can only sometimes be meaningfully interpreted), the response variable had an overall value of 1.81K. Had the intervention not taken place, we would have expected a sum of 2.17K. The 95% interval of this prediction is [1.38K, 2.94K].\n\nThe above results are given in terms of absolute numbers. In relative terms, the response variable showed a decrease of -17%. The 95% interval of this percentage is [-52%, +20%].\n\nThis means that, although it may look as though the intervention has exerted a negative effect on the response variable when considering the intervention period as a whole, this effect is not statistically significant, and so cannot be meaningfully interpreted. The apparent effect could be the result of random fluctuations that are unrelated to the intervention. This is often the case when the intervention period is very long and includes much of the time when the effect has already worn off. It can also be the case when the intervention period is too short to distinguish the signal from the noise. Finally, failing to find a significant effect can happen when there are not enough control variables or when these variables do not correlate well with the response variable during the learning period.\n\nThe probability of obtaining this effect by chance is p = 0.188. This means the effect may be spurious and would generally not be considered statistically significant. \n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}