<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Paulo Villarroel">
<meta name="dcterms.date" content="2022-12-30">
<meta name="description" content="Te ensañaré paso a paso como usar una API, usar funciones iterativas y automatizar diversas tareas para pasar de días a solo minutos.">

<title>PauloVillarroel.com - Descargué casi 3000 imágenes de Fornite!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-RNWVZS7ZL8"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-RNWVZS7ZL8', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">PauloVillarroel.com</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">Sobre mí</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/paulovillarroel"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Chazkon"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/paulovillarroeltapia/"><i class="bi bi-linkedin" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Descargué casi 3000 imágenes de Fornite!</h1>
                  <div>
        <div class="description">
          Te ensañaré paso a paso como usar una API, usar funciones iterativas y automatizar diversas tareas para pasar de días a solo minutos.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">tutorial</div>
                <div class="quarto-category">api</div>
                <div class="quarto-category">r</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Paulo Villarroel </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 30, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#el-problema" id="toc-el-problema" class="nav-link active" data-scroll-target="#el-problema">El problema</a></li>
  <li><a href="#posibles-soluciones" id="toc-posibles-soluciones" class="nav-link" data-scroll-target="#posibles-soluciones">Posibles soluciones</a></li>
  <li><a href="#la-solución" id="toc-la-solución" class="nav-link" data-scroll-target="#la-solución">La solución</a></li>
  <li><a href="#automatizando" id="toc-automatizando" class="nav-link" data-scroll-target="#automatizando">Automatizando</a></li>
  <li><a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones">Conclusiones</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/paulovillarroel/mi_blog/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Hola nuevamente!!!</p>
<p>Si es primera vez que estás por acá, espero que este contenido te sea interesante y logre desquearte alguna idea. Si ya me conoces, te agradezco estar por acá otra vez.</p>
<p>El post de hoy es medio off-topic de las temáticas que habitualmente hablo en el blog, pero me parece que es puede llegar a ser de interés para muchas personas. Habitualmente mezclo cosas de distintas temáticas, algo como la medicina traslacional jajaja 😅</p>
<p>Te cuento…</p>
<p>Mi hijo mayor es un entusiasta del diseño gráfico y a los videojuegos, como buen pre-adolescente. La cosa es la semana pasada me dijo que habia <a href="https://skindb.co/fortnite">encontrado una web</a> en donde hay muchas skins y gráficas de Fortnite. Se supone que ahí estan todas las imágenes de los personajes, las armas, gliders y esas cosas del juego.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="web-skins.jpg" class="img-fluid figure-img" width="800"></p>
</figure>
</div>
<p>Como le gusta diseñar con Photoshop, se descarga las imágenes que le gustan, las edita y haces alguno diseños con ellas. El tema es que para descargarlas, hay que navegar por una serie de menús y hacer varios clics para tener la imagen en una buena resolución, para luego descargarla.</p>
<p>Lo que me preguntó fue que si había una forma de descargar todas las imágenes del sitio de forma masiva, pero las de buena calidad, ya que hacerlo de a una era muy lento.</p>
<p>Ok… pues tenemos nuestro problema a resolver!!!</p>
<p>Ah!! De ahora en adelante, nombraré a mi hijo como mi cliente.</p>
<section id="el-problema" class="level2">
<h2 class="anchored" data-anchor-id="el-problema">El problema</h2>
<p>En programación partimos desde un problema que es necesario resolver. Bueno, hay un paso clave acá que es el de comprender profundamente el problema de modo de buscar las mejores alternativas de solución, que incluso, pueden no ser de programación como tal. Ahora, si este fuera un caso de Ciencia de Datos, igual hay un paso previo que es el de <strong>análisis de factibilidad</strong>, pero de eso no te voy a hablar ahora. Ya lo veremos en una próxima oportunidad.</p>
<p>Pues bien, veamos el problema un poco más en detalle…</p>
<p>La idea es poder disponer de todas las imágenes de Fortnite en buena calidad para poder realizar diseños. El tema, es que descargarlas manualmente desde la web es una tarea muy tediosa y lenta. Además, que la cantidad de imágenes son bastantes.</p>
</section>
<section id="posibles-soluciones" class="level2">
<h2 class="anchored" data-anchor-id="posibles-soluciones">Posibles soluciones</h2>
<p>Como me había mostrado la web, lo primero que se me pasó por la mente fue hacer un scraper para descargar las imágenes. Estuve indagando esta opción, pero la deseché al poco tiempo. Los motivos fueron que algunas imágenes no erán de buena calidad (la gran mayoría si lo era, en todo caso). Además, las rutas en algunos casos eran extrañas y algunos botones para acceder a las secciones tenían bastante variabilidad. Todas esas cosas hacía que codificar el scraper sea más complejo. Posiblemente lo habría resuelto con algunos días de trabajo, pero tenía un requerimiento del cliente explícito: necesitaba las imágenes antes de las 14hrs. ¿Por qué? No tengo idea jajaja</p>
<p>Pero bueno, fue así. Tenía un par de horas, entonces.</p>
<p>Como pensé que en el scraper me tomaría más tiempo del disponible, indagué otras opciones.</p>
<p>Fortnite es un juego ultra conocido. Mi pensamiento era buscar otra web similar e intentar el scraper, pero mi cliente no deseaba otra web.</p>
<p>En la búsqueda de webs me surgió la duda… Bueno, y esta gente, ¿De dónde saca las imágenes? Porque de algún lado las sacan, no? No creo que se scrapeen mutuamente. Además, que son cientos o miles de imágenes y que constantemente se están actualizando. Esa labor no se hace de forma manual.</p>
<p>Entonces, pensé que debía haber un repositorio central con todas las imágenes y que los desarrolladores sacaban desde ahí sus datos. Lo clásico en estos casos es usar una API (Application Programming Interface, o Interfaz de Programación de Aplicaciones en español).</p>
<p>Te comento que estoy desarrollando una serie de artículos para enseñar qué son las API y cómo consumirlas. Puedes <a href="https://www.paulovillarroel.com/posts/api-cero-a-experto-p1/">leer este otro artículo</a> en donde explico desde cero qué son las API. A modo de ultra resumen, una API podemos entenderlas como la forma en que 2 sistemas informáticos se comunican para lo cual usan una serie de protocolos y estandarizaciones de modo que se puedan entender. Entonces, una parte hace una solicitud y la otra (el servidor) responde con algunos determinados datos. Si no sabes mucho del tema, igaual te aconsejo que te leas ese artículo primero y lueg vuleve a éste, para que te quede todo más claro.</p>
<p>En este caso, me puse a buscar alguna API de Fortnite que estuviera disponible.</p>
<p>Hay una web que me gusta bastante y que suelo usar, pues tiene cientos de API y es bastante ordenada. Se llama <a href="https://rapidapi.com/hub">Rapid API</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="rapidapi.jpg" class="img-fluid figure-img" width="800"></p>
</figure>
</div>
<p>Bueno, investigando la web de Rapid API encontré varias de Fortnite.<br>
Me llamó la atención <a href="https://rapidapi.com/brianiswu/api/fortnite1/">una de ellas</a>, pues es bastante completa, tiene baja latencia, buena disponibilidad y es gratis.</p>
<p>Estuve viendo la API junto a mi cliente y le pareció una buena idea.</p>
<p>Pues bien! Ahora vamos a programar un poco para implementar el consumo de la API.</p>
</section>
<section id="la-solución" class="level2">
<h2 class="anchored" data-anchor-id="la-solución">La solución</h2>
<p>El lenguaje que usaré es R, pues es el que más controlo.</p>
<p>Para poder usar la API hay que suscribirse a ella. Esto te genera un token para que puedas interectuar y autentizarte en ella. Bueno, la API solo permite aplicar métodos GET. En todo caso, eso me da igual, pues es justamente lo que necesitamos. Así que todo bien.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="rapidapi2.jpg" class="img-fluid figure-img" width="800"></p>
</figure>
</div>
<p>La API tiene varios <strong>endpoints</strong>. Los endpoint de un API son puntos finales o direcciones en un servidor que pueden ser accedidos a través de la red (como Internet) para recibir o enviar datos. Un API puede tener múltiples endpoint, y cada uno de ellos puede realizar una función específica, como obtener datos de una base de datos, enviar un correo electrónico, o realizar una acción en un sistema externo.</p>
<p>En resumen, los endpoint de un API son puntos de acceso a los servicios y funcionalidades que ofrece una aplicación o sistema a través de la red. Para nuestro caso, la API nos ofrece varias opciones. Entre ellas hay una que nos pareció interesante y es que nos permite acceder a un listado con todos los skins y elementos de los personajes. A primera vista parece ser lo que necesitamos. Pero es necesario darle una vista un poco más en detalle.</p>
<p>Entonces, veamos cómo pedir esos datos y ver qué nos da…</p>
<p>Para implementar el método GET en R, podemos usar este código:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://fortnite1.p.rapidapi.com/items/list"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">VERB</span>(<span class="st">"GET"</span>, url, <span class="fu">add_headers</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Authorization"</span> <span class="ot">=</span> <span class="st">"string"</span>, </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"X-RapidAPI-Key"</span> <span class="ot">=</span> <span class="st">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>, </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"X-RapidAPI-Host"</span> <span class="ot">=</span> <span class="st">"fortnite1.p.rapidapi.com"</span>), </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">content_type</span>(<span class="st">"application/octet-stream"</span>))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(response, <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En Python, podemos hacerlo de la siguiente forma:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://fortnite1.p.rapidapi.com/items/list"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Authorization"</span>: <span class="st">"string"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"X-RapidAPI-Key"</span>: <span class="st">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"X-RapidAPI-Host"</span>: <span class="st">"fortnite1.p.rapidapi.com"</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.request(<span class="st">"GET"</span>, url, headers<span class="op">=</span>headers)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(response.text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>He reemplazo la API-key por XXXXXXX lógicamente por temas de seguridad. Ese dato es único para cada persona que se suscriba a a API, asi que reemplázalo por el que te corresponda.</p>
<p>La respuesta del servidor es un JSON.</p>
<p>El JSON (JavaScript Object Notation) es un formato de texto utilizado para representar datos estructurados. Es muy común en el desarrollo de aplicaciones y se utiliza para intercambiar datos a través de la red (como Internet).</p>
<p>Un archivo o texto JSON se compone de pares de clave-valor, que se encierran entre llaves {}. Cada par de clave-valor se separa con una coma. Las claves son cadenas de texto (encerradas entre comillas) y los valores pueden ser de diferentes tipos, como números, cadenas de texto, o incluso otros objetos JSON anidados.</p>
<p>Aquí hay un ejemplo de cómo se vería un objeto JSON:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"nombre"</span><span class="sc">:</span> <span class="st">"Juan"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"edad"</span><span class="sc">:</span> <span class="dv">30</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dirección"</span><span class="sc">:</span> {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"calle"</span><span class="sc">:</span> <span class="st">"Calle Falsa"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ciudad"</span><span class="sc">:</span> <span class="st">"Ciudad Falsa"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"país"</span><span class="sc">:</span> <span class="st">"País Falso"</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"intereses"</span><span class="sc">:</span> [<span class="st">"lectura"</span>, <span class="st">"deportes"</span>, <span class="st">"viajes"</span>]</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En este ejemplo, tenemos un objeto JSON con cuatro pares de clave-valor: “nombre”, “edad”, “dirección” y “intereses”. El valor de “nombre” es una cadena de texto, el valor de “edad” es un número, el valor de “dirección” es otro objeto JSON anidado y el valor de “intereses” es una lista de cadenas de texto.</p>
<p>JSON es muy utilizado en el desarrollo de aplicaciones porque es un formato sencillo y fácil de leer tanto para personas como para máquinas. Además, es ampliamente compatible con diferentes lenguajes de programación y plataformas.</p>
<p>Ok… ya con eso explicado a grandes rasgos, veamos que nos da nuestra API de Fortnite:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">content</span>(response, <span class="st">"text"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"{</span><span class="sc">\"</span><span class="st">lastUpdate</span><span class="sc">\"</span><span class="st">:0,</span><span class="sc">\"</span><span class="st">lanuage</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">en</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">data</span><span class="sc">\"</span><span class="st">:[{</span><span class="sc">\"</span><span class="st">itemId</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">7fe1e64e-fc28-4a2c-bb1e-d5711a04fb16</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">lastUpdate</span><span class="sc">\"</span><span class="st">:1668185110,</span><span class="sc">\"</span><span class="st">item</span><span class="sc">\"</span><span class="st">:{</span><span class="sc">\"</span><span class="st">name</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">Gods of Thunder Pack</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">description</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">type</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">bundle</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">rarity</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">epic</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">series</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">marvel</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">cost</span><span class="sc">\"</span><span class="st">:2500,</span><span class="sc">\"</span><span class="st">upcoming</span><span class="sc">\"</span><span class="st">:false,</span><span class="sc">\"</span><span class="st">images</span><span class="sc">\"</span><span class="st">:{</span><span class="sc">\"</span><span class="st">icon</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">https://dropin-bucket.mativecdn.com/cosmetics/br/7fe1e64e-fc28-4a2c-bb1e-d5711a04fb16_l5bp7gje/icon.png</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">featured</span><span class="sc">\"</span><span class="st">:null,</span><span class="sc">\"</span><span class="st">background</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">https://dropin-bucket.mativecdn.com/cosmetics/br/7fe1e64e-fc28-4a2c-bb1e-d5711a04fb16_l5bp7gje/icon.png</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">information</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">https://dropin-bucket.mativecdn.com/cosmetics/br/7fe1e64e-fc28-4a2c-bb1e-d5711a04fb16_l5bp7gje/icon.png</span><span class="sc">\"</span><span class="st">},</span><span class="sc">\"</span><span class="st">backpack</span><span class="sc">\"</span><span class="st">:{},</span><span class="sc">\"</span><span class="st">obtained</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">2500</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">obtained_type</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">vbucks</span><span class="sc">\"</span><span class="st">,</span><span class="sc">\"</span><span class="st">ratings</span><span class="sc">\"</span><span class="st">:{</span><span class="sc">\"</span><span class="st">avgStars</span><span class="sc">\"</span><span class="st">:3.68,</span><span class="sc">\"</span><span class="st">totalPoints</span><span class="sc">\"</span><span class="st">:2228,</span><span class="sc">\"</span><span class="st">numberVotes</span><span class="sc">\"</span><span class="st">:606},</span><span class="sc">\"</span><span class="st">costmeticId</span><span class="sc">\"</span><span class="st">:</span><span class="sc">\"</span><span class="st">7fe1e64e-fc28-4a2c-bb1e-d5711a04fb16_l5bp7gje</span><span class="sc">\"</span><span class="st">.....</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Qué es eso!!! 😖</p>
<p>Recorté la respuesta, porque era muy larga. En todo caso, verlo así es medio complejo y se ve horrible. Se ve que tiene varios datos, pero tratemos de darle una forma más simple de leer y ver si realmente nos sirve para resolver el problema de mi cliente.</p>
<p>Para el caso de R, podemos usar la librería <code>jsonlite</code> que nos facilita leer este tipo de respuestas y transformarla a un objeto con el cual podamos interactuar de mejor forma:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>items <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(response<span class="sc">$</span>content))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con eso obtenemos una lista ordenada con todos los datos de la API.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">unnest</span>(items<span class="sc">$</span>data<span class="sc">$</span>item, <span class="at">cols =</span> <span class="fu">c</span>(images, backpack, ratings))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Luego, pasamos esta lista a un dato de tipo dataframe, que nos permite estructurar los datos como una tabla y que facilita ver que hay dentro.</p>
<p>Nos da como resultado algo así. Ojo, el archivo tiene más de 8300 filas y 19 variables (columnas).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="df.jpg" class="img-fluid figure-img" width="800"></p>
</figure>
</div>
<p>Al ver que hay, vemos que contiene varios links a imágenes .<em>png</em></p>
<p>Creo que nos gusta!! 🎉</p>
<p>Estuvimos mirando, en detalle, los datos y los links. Encontramos que hay algunos variables que contienen links a las imágenes que estábamos buscando. Si!!! Efectivamente. Teníamos un listado muy extenso con los detalles de los personajes de Fortnite con link a sus skins, armas y una serie de elementos.</p>
<p>Genial!!!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="skin.png" class="img-fluid figure-img" width="500"></p>
</figure>
</div>
<p>Muy bien. Ya teníamos varias cosas. Ese listado con los personajes y los links a sus imágenes, con buena calidad. Incluso, varias de las que en la web tenian poca resolución, acá estaban bien. Mejor aún.</p>
<p>Ahora toca seguir con la solución, porque hasta ahora solo tenemos un listado gigante de links. Que está bien, pero no tiene sentido copiar y pegar cada link en el navegador, para luego descargar las imágenes. Al final, es casi lo mismo de antes. Y son miles de registros. No nos sirve esa lógica. Debemos automatizar la lectura de esos links y las descargas.</p>
<p>Entonces, vamos con la segunda parte… Automatizar las descargas.</p>
</section>
<section id="automatizando" class="level2">
<h2 class="anchored" data-anchor-id="automatizando">Automatizando</h2>
<p>Te voy a dejar el código que hicimos y luego te lo explico…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>featured <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(featured <span class="sc">!=</span> <span class="fu">is.na</span>(featured)) <span class="sc">|&gt;</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">str_replace_all</span>(name, <span class="st">" "</span>, <span class="st">"-"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, featured)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://dropin-bucket.mativecdn.com/cosmetics/br/character_darkazalea/featured.png"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>destfile <span class="ot">&lt;-</span> <span class="st">"C:/your/path/fortnite/img/image.png"</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, destfile, <span class="at">mode =</span> <span class="st">"wb"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Primero, hago alguna manipulación del listado de antes, pues no todos las variables nos sirven y ajustamos un poco los nombres de las variables.</p>
<p>Para probar si los pasos para descargar las iágenes están bien, hago un prueba con 1 link (y no con los miles de registros). En R tenemos la función <code>download.file()</code> que nos permite descargar archivos desde internet. A esta función le tenemos que pasar 2 parámetros: la url (donde está el archivo en la web) y la ruta de destino del archivo. Finalmente se agrega el <code>modo = "wb"</code> para que no hayan problemas de codificación del archivo de tipo imagen (en Windows eso suele pasar en estos casos).</p>
<p>Luego de la prueba, logramos descargar la imagen sin problemas.</p>
<p>Lo que toca ahora es aplicarlo a todas las imágenes y links. Para ello, construimos el siguiente <code>for</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(featured))){</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  names <span class="ot">&lt;-</span> featured<span class="sc">$</span>name[i]</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> featured<span class="sc">$</span>featured[i]</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  destfile <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"C:/your/path/fortnite/img/"</span>, names ,<span class="st">".png"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(url, destfile, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este código no es el mejor, tiene varias cosas que se podrían optimizar, pero recuerda que mi cliente me estableció un límite horario impostergable jajaja</p>
<p>Lo importante…</p>
<p>El código funcionó!! Se tomó su tiempo, varios minutos. Después de todo, descargué <strong>más de 3000 imágenes.</strong></p>
<p>¿Se puede mejorar? Si, claro. Pero es posible que no vuelva a usar el código en mucho tiempo y ya tenía las imágenes. Asi que ponerme a optimizarlo, en esos momentos, no tenía mucho sentido.</p>
<p>Cuando le mostré el resultado a mi cliente quedó sorprendido 🤯</p>
<p>No podía creer que tenía más de 3000 imágenes de alta calidad de sus personajes de Fortnite en una sola carpeta. Y antes del plazo que me había definido. Boom! Misión cumplida.</p>
<p>Buenísimo!!! 🎉</p>
<p>Ok. Ahora que estoy escribiendo este artículo, se me ocurrió hacerle algunas mejoras al código:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="fu">seq_len</span>(<span class="fu">nrow</span>(featured)), <span class="cf">function</span>(i) {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  names <span class="ot">&lt;-</span> featured<span class="sc">$</span>name[i]</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> featured<span class="sc">$</span>featured[i]</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  destfile <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"C:/your/path/fortnite/img/"</span>, names ,<span class="st">".png"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(url, destfile, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Usé la función <code>seq_len()</code> en lugar de <code>1:nrow(featured)</code> para iterar sobre los índices de las filas de <code>featured</code>. Esto es más rápido y evita tener que evaluar <code>nrow(featured)</code> en cada iteración del bucle.</p>
<p>Además, usé la función <code>sapply()</code> en lugar de un bucle <code>for</code> para descargar los archivos. Esto es más rápido y puede ser más fácil de leer y mantener.</p>
</section>
<section id="conclusiones" class="level2">
<h2 class="anchored" data-anchor-id="conclusiones">Conclusiones</h2>
<p>Muchas veces me contactan personas que están empezando a programar y me dicen que no tienen proyectos para hacer, que no saben de donde sacar datos o cosas así. A veces, no podemos acceder a los datos que nos gustaría en especial en salud que hay hartos temas de privacidad. Pero podemos usar otros tipos de datos que de todas formas nos permiten ejercitar nuestras habilidades y lógica. Tienes que ser curiso/a e indagar varias alternativas. No te quedes con lo primero que se te ocurra.</p>
<p>Además, lo relevante es lograr identificar bien el problema, las limitaciones y los requisitos que nos permiten darnos cuenta de cuándo lo resolveríamos. Es común no detenerse en esos puntos y lanzarse de una al codigo.</p>
<p>Separa el problema en pequeñas partes, más abordables y manejables.</p>
<p>Valida rápido con el cliente los avances y si las salidas cumplen sus expectativas. Todos esas partes (en que dividiste el problema) valídalas y avanza en a medida que sea necesario.</p>
<p>La tecnología sirve para mucho, pero una de las cosas que ayuda mucho es para acceder a grandes volúmenes datos y automatizar actividades, reduciendo las tareas manuales y los tiempos de ejecución.</p>
<p>Y, finalmente, si tu solución resuelve el problema, déjalo así. En especial si es un proyecto puntual. Ya habrá momentos de optimizar el código y de mejorar su desempeño y esas cosas, pero es un trabajo posterior y solo para casos en donde tengas que reutilzar el código o que haya que hacerle mantenimiento. Primero enfócate en resolver el problema. Da igual si queda feo. A tu cliente no le interesa el código, le interesa el resultado. La clave es resolver el problema!</p>
<p>Espero que este artículo te haya sido de utilidad.</p>
<p>Saludos!</p>


</section>

</main> <!-- /main -->
<div>
<hr>

<iframe src="https://embeds.beehiiv.com/274e86f2-9411-4829-afd2-e4879f66212f" data-test-id="beehiiv-embed" width="100%" height="320" frameborder="0" scrolling="no" style="border-radius: 4px; border: 2px solid #e5e7eb; margin: 0; background-color: transparent;"></iframe>

<hr>
</div>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/https:\/\/www\.paulovillarroel\.com\//);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<script src="https://giscus.app/client.js" data-repo="paulovillarroel/mi_blog" data-repo-id="R_kgDOH_9CVg" data-category="General" data-category-id="DIC_kwDOH_9CVs4CRgbc" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Paulo Villarroel, 2022</div>
  </div>
</footer>



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>